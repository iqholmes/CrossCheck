{"ast":null,"code":"var _jsxFileName = \"/Users/ianholmes/code/final-project/client/src/components/post/post-score-view.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { Button } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Modal } from 'react-bootstrap';\nimport { getWorkoutByDay, postNewWorkoutResult, fetchUser } from '../../actions';\nimport { getTimeInSeconds } from '../../utils';\nimport emailjs from \"emailjs-com\";\nimport './post-score.css'; // import ReserveClass from '../class/reserve-class';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst PostScoreView = () => {\n  _s();\n\n  const [show, setShow] = useState(false);\n  const [reps, setReps] = useState(Number);\n  const [time, setTime] = useState('');\n  const firstName = useSelector(state => state.auth.firstName);\n  const lastName = useSelector(state => state.auth.lastName);\n  const authenticated = useSelector(state => state.auth.authenticated);\n  const userString = `${firstName} ${lastName}`;\n  const [athlete, setAthlete] = useState(userString); //const email = useSelector((state) => state.auth.email);\n\n  const {\n    workout\n  } = useSelector(state => state.workoutData);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (authenticated) {\n      dispatch(fetchUser());\n    }\n  }, [authenticated, dispatch]);\n\n  const handleNewWorkoutResult = e => {\n    e.preventDefault();\n    const timeRegex = /^(?:0?\\d|1[012]):[0-5]\\d$/;\n    emailjs.send(\"service_1yn4q4n\", \"template_m8634rk\", {\n      name: userString,\n      time: time,\n      workoutname: workout.name,\n      workoutlength: workout.length,\n      workoutrepcount1: workout.repcount1,\n      workoutmovement1: workout.movement1,\n      workoutrepcount2: workout.repcount2,\n      workoutmovement2: workout.movement2,\n      workoutrepcount3: workout.repcount3,\n      workoutmovement3: workout.movement3,\n      workoutrepcount4: workout.repcount4,\n      workoutmovement4: workout.movement4,\n      workoutrepcount5: workout.repcount5,\n      workoutmovement5: workout.movement5,\n      workoutweight: workout.weight\n    }, \"bmmKPo-udh8ZYa33p\").then(res => {\n      console.log(res);\n    }).catch(err => console.log(err));\n\n    if (workout.type === 'time' && !timeRegex.test(time)) {\n      alert('Please enter a valid time format. i.e. 00:00');\n      return;\n    }\n\n    const result = workout.type === 'reps' ? {\n      reps\n    } : workout.type === 'time' ? {\n      time\n    } : undefined;\n\n    if (result === undefined) {\n      setShow(false);\n      return;\n    }\n\n    dispatch(postNewWorkoutResult(workout._id, {\n      reps,\n      time: getTimeInSeconds(time),\n      // this will take the string and send it to the BE as a number in secs\n      athlete\n    }));\n    setShow(false);\n  };\n\n  useEffect(() => {\n    dispatch(getWorkoutByDay()); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getWorkoutByDay]);\n\n  function renderWorkout() {\n    if (workout) {\n      // console.log('4:10', getTimeInSeconds('4:10'))\n      // console.log('04:10', getTimeInSeconds('04:10'))\n      //console.log(getSecondsToTime(250)) \n      // NOTE: when displaying the \"time\" (from BE in seconds), use this function to show it as a \"time string\"\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Post Your Score\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: workout.name\n        }, workout.day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.repCount1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.movement1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.repCount2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.movement2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.repCount3\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.movement3\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.repCount4\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.movement4\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.repCount5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.movement5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: workout.weight\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Post Your Score\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this);\n  }\n\n  ;\n\n  function renderAddCompanyModal() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary post-score-button\",\n        onClick: () => setShow(true),\n        children: \"Post Your Score\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        show: show,\n        onHide: () => setShow(false),\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Post your Score\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: workout && /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [workout.type === 'reps' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Athlete Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  required: true,\n                  className: \"form-control\",\n                  placeholder: \"Enter Your Name\",\n                  name: \"name\",\n                  value: userString,\n                  onChange: e => setAthlete(userString)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Reps\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  required: true,\n                  name: \"reps\",\n                  className: \"form-control\",\n                  placeholder: \"Enter Total Reps\",\n                  value: reps,\n                  onChange: e => setReps(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true), workout.type === 'time' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Athlete Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 17\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  required: true,\n                  className: \"form-control\",\n                  placeholder: \"Enter Your Name\",\n                  name: \"name\",\n                  value: userString,\n                  onChange: e => setAthlete(userString)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Time\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"form-control\",\n                  placeholder: \"Enter Time (MM:SS)\",\n                  name: \"time\",\n                  value: time,\n                  onChange: e => setTime(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: () => setShow(false),\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"primary post-score-button\",\n            onClick: handleNewWorkoutResult,\n            children: \"Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n  if (authenticated) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [renderWorkout(), renderAddCompanyModal()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/login\",\n        children: \"Log in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }, this), \" or \", /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/signup\",\n        children: \"sign up!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 48\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }, this);\n  }\n};\n\n_s(PostScoreView, \"1eG5RK/t9h+jEzRuFpwHiaE18E8=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = PostScoreView;\nexport default PostScoreView;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostScoreView\");","map":{"version":3,"sources":["/Users/ianholmes/code/final-project/client/src/components/post/post-score-view.js"],"names":["useEffect","useState","Button","useDispatch","useSelector","Link","Modal","getWorkoutByDay","postNewWorkoutResult","fetchUser","getTimeInSeconds","emailjs","PostScoreView","show","setShow","reps","setReps","Number","time","setTime","firstName","state","auth","lastName","authenticated","userString","athlete","setAthlete","workout","workoutData","dispatch","handleNewWorkoutResult","e","preventDefault","timeRegex","send","name","workoutname","workoutlength","length","workoutrepcount1","repcount1","workoutmovement1","movement1","workoutrepcount2","repcount2","workoutmovement2","movement2","workoutrepcount3","repcount3","workoutmovement3","movement3","workoutrepcount4","repcount4","workoutmovement4","movement4","workoutrepcount5","repcount5","workoutmovement5","movement5","workoutweight","weight","then","res","console","log","catch","err","type","test","alert","result","undefined","_id","renderWorkout","day","repCount1","repCount2","repCount3","repCount4","repCount5","renderAddCompanyModal","target","value"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { Button } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport {  Modal } from 'react-bootstrap';\nimport { getWorkoutByDay, postNewWorkoutResult, fetchUser } from '../../actions';\nimport { getTimeInSeconds } from '../../utils';\nimport emailjs from \"emailjs-com\";\nimport './post-score.css';\n// import ReserveClass from '../class/reserve-class';\n\nconst PostScoreView = () => {\n  const [show, setShow] = useState(false);\n  const [reps, setReps] = useState(Number);\n  const [time, setTime] = useState('');\n  const firstName = useSelector((state) => state.auth.firstName);\n  const lastName = useSelector((state) => state.auth.lastName);\n  const authenticated = useSelector((state) => state.auth.authenticated);\n  const userString = `${firstName} ${lastName}`\n  const [athlete, setAthlete] = useState(userString);\n  //const email = useSelector((state) => state.auth.email);\n  const { workout } = useSelector((state) => state.workoutData);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (authenticated) {\n      dispatch(fetchUser());\n    } \n  }, [authenticated, dispatch]);\n\n  const handleNewWorkoutResult = (e) => {\n    e.preventDefault();\n\n    const timeRegex = /^(?:0?\\d|1[012]):[0-5]\\d$/;\n\n    emailjs.send(\"service_1yn4q4n\",\"template_m8634rk\", {\n      name: userString,\n      time: time,\n      workoutname: workout.name,\n      workoutlength: workout.length,\n      workoutrepcount1: workout.repcount1,\n      workoutmovement1: workout.movement1,\n      workoutrepcount2: workout.repcount2,\n      workoutmovement2: workout.movement2,\n      workoutrepcount3: workout.repcount3,\n      workoutmovement3: workout.movement3,\n      workoutrepcount4: workout.repcount4,\n      workoutmovement4: workout.movement4,\n      workoutrepcount5: workout.repcount5,\n      workoutmovement5: workout.movement5,\n      workoutweight: workout.weight    \n      }, \"bmmKPo-udh8ZYa33p\").then(res => {\n      console.log(res);\n    }).catch(err => console.log(err));\n    \n    if (workout.type === 'time' && !timeRegex.test(time)) {\n      alert('Please enter a valid time format. i.e. 00:00');\n      return;\n    }\n\n    const result = workout.type === 'reps' ? {reps} : workout.type === 'time' ? {time} : undefined;\n    if (result === undefined) {\n      setShow(false);\n      return;\n    }\n    \n    dispatch(\n      postNewWorkoutResult(workout._id, {\n        reps,\n        time: getTimeInSeconds(time), // this will take the string and send it to the BE as a number in secs\n        athlete\n      })\n    );\n    setShow(false);\n  };\n\n  useEffect(() =>{\n    dispatch(getWorkoutByDay());\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getWorkoutByDay]);\n\n  function renderWorkout() {\n    if (workout) {\n      // console.log('4:10', getTimeInSeconds('4:10'))\n      // console.log('04:10', getTimeInSeconds('04:10'))\n      //console.log(getSecondsToTime(250)) \n      // NOTE: when displaying the \"time\" (from BE in seconds), use this function to show it as a \"time string\"\n      return (\n        <div>\n          <h1>Post Your Score</h1>    \n          <hr></hr>\n          <h3 key={workout.day}>{workout.name}</h3>\n            <div>{workout.length}</div>\n            <div>{workout.repCount1}</div>\n            <div>{workout.movement1}</div>\n            <div>{workout.repCount2}</div>\n            <div>{workout.movement2}</div>\n            <div>{workout.repCount3}</div>\n            <div>{workout.movement3}</div>\n            <div>{workout.repCount4}</div>\n            <div>{workout.movement4}</div>\n            <div>{workout.repCount5}</div>\n            <div>{workout.movement5}</div>\n            <div>{workout.weight}</div>\n            <br></br>\n        </div>\n      )\n    }\n    return (\n      <div>\n        <h1>Post Your Score</h1>    \n        <hr></hr>\n        {/* <div>{workoutPost}</div> */}\n      </div>\n    )\n  };\n\n\n  function renderAddCompanyModal() {\n    return (\n      <>\n        <Button variant=\"primary post-score-button\" onClick={() => setShow(true)}>\n          Post Your Score\n        </Button>\n  \n        <Modal show={show} onHide={() => setShow(false)}>\n          <Modal.Header>\n            <Modal.Title>Post your Score</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            {workout && (<form>\n              {workout.type === 'reps' && (<>\n                <div className=\"form-group\">\n                <label>Athlete Name</label>\n                  <input\n                    required\n                    className=\"form-control\"\n                    placeholder=\"Enter Your Name\"\n                    name=\"name\"\n                    value={userString}\n                    onChange={(e) => setAthlete(userString)} \n                  ></input>\n                  <label>Reps</label>\n                  <input\n                    required\n                    name=\"reps\"\n                    className=\"form-control\"\n                    placeholder=\"Enter Total Reps\"\n                    value={reps}\n                    onChange={(e) => setReps(e.target.value)} \n                  ></input>\n                </div>\n                <br />\n              </>)}\n              {workout.type === 'time' && (<>\n                <div className=\"form-group\">\n                <label>Athlete Name</label>\n                  <input\n                    required\n                    className=\"form-control\"\n                    placeholder=\"Enter Your Name\"\n                    name=\"name\"\n                    value={userString}\n                    onChange={(e) => setAthlete(userString)} \n                  ></input>\n                  <label>Time</label>\n                  <input\n                    className=\"form-control\"\n                    placeholder=\"Enter Time (MM:SS)\" \n                    name=\"time\"\n                    value={time}\n                    onChange={(e) => setTime(e.target.value)} \n                  ></input>\n                </div>\n                <br />\n              </>)}\n            </form>)}\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={() => setShow(false)}>\n              Close\n            </Button>\n            <Button variant=\"primary post-score-button\" onClick={handleNewWorkoutResult} >\n              Post\n            </Button>\n          </Modal.Footer>\n        </Modal>\n      </>\n    );\n    }\n  if (authenticated) {\n    return (\n      <div>\n        {renderWorkout()}\n        {renderAddCompanyModal()}\n      </div>\n    )} else {\n      return (\n        <h1><Link to=\"/login\">Log in</Link> or <Link to =\"/signup\">sign up!</Link></h1>\n      )\n    }\n};\n\nexport default PostScoreView;"]},"metadata":{},"sourceType":"module"}